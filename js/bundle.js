(()=>{"use strict";function e(e){e.addEventListener("click",(o=>{o.target!==e&&""!=o.target.getAttribute("data-close")||t(e)})),document.addEventListener("keydown",(o=>{"Escape"===o.code&&e.classList.contains("show")&&t(e)}))}function t(e){e.classList.remove("show"),document.body.style.overflow=""}function o(e,t){document.querySelector(e).classList.add("show"),document.body.style.overflow="hidden",t&&clearInterval(t)}window.addEventListener("DOMContentLoaded",(()=>{const t=setTimeout((()=>{o(".modal",t)}),5e3);(function(){const e=document.querySelector(".calculating__result span");let t,o,n,r="female",c=1.375;function i(){e.textContent=t&&o&&n?"female"==r?Math.round((447.6+9.2*o+3.1*t-4.3*n)*c):Math.round((88.36+13.4*o+4.8*t-5.7*n)*c):"Ошибка ввода данных"}function l(e,t){document.querySelectorAll(e).forEach((e=>{e.classList.remove(t),e.getAttribute("data-ratio")!==localStorage.getItem("ratio")&&e.getAttribute("id")!==localStorage.getItem("sex")||e.classList.add(t)}))}function a(e,t){const o=document.querySelectorAll(e);o.forEach((e=>{e.addEventListener("click",(e=>{e.target.getAttribute("data-ratio")?(c=+e.target.getAttribute("data-ratio"),localStorage.setItem("ratio",c)):e.target.getAttribute("id")&&(r=e.target.getAttribute("id"),localStorage.setItem("sex",r)),o.forEach((e=>{e.classList.remove(t)})),e.target.classList.add(t),i()}))}))}function s(e){const r=document.querySelector(e);r.addEventListener("input",(e=>{switch(r.value.match(/\D/g)?r.style.border="1px solid red":r.style.border="",r.getAttribute("id")){case"height":t=+r.value,localStorage.setItem("height",+r.value);break;case"weight":o=+r.value,localStorage.setItem("weight",+r.value);break;case"age":n=+r.value,localStorage.setItem("age",+r.value)}i()}))}localStorage.getItem("sex")?r=localStorage.getItem("sex"):(r="female",localStorage.setItem("sex",r)),localStorage.getItem("ratio")?c=localStorage.getItem("ratio"):(c=1.375,localStorage.setItem("ratio",c)),localStorage.getItem("height")&&(t=localStorage.getItem("height"),document.querySelector("#height").value=t),localStorage.getItem("weight")&&(o=localStorage.getItem("weight"),document.querySelector("#weight").value=o),localStorage.getItem("age")&&(n=localStorage.getItem("age"),document.querySelector("#age").value=n),l("#gender div","calculating__choose-item_active"),l(".calculating__choose_big div","calculating__choose-item_active"),i(),s("#height"),s("#weight"),s("#age"),a("#gender div","calculating__choose-item_active"),a(".calculating__choose_big div","calculating__choose-item_active")})(),function(){class e{constructor(e,t,o,n,r,c,i,l){this.img=t,this.alt=o,this.subtitle=n,this.descr=r,this.price=c,this.convert=l,this.parentSelector=document.querySelector(e),this.price=this.convertPriseFromTo(i,l)}render(){this.parentSelector.children[0].insertAdjacentHTML("beforeend",`\n                    <div class="menu__item">\n                        <img src="${this.img}" alt="${this.alt}">\n                        <h3 class="menu__item-subtitle">Меню "${this.subtitle}"</h3>\n                        <div class="menu__item-descr">${this.descr}</div>\n                        <div class="menu__item-divider"></div>\n                            <div class="menu__item-price">\n                            <div class="menu__item-cost">Цена:</div>\n                            <div class="menu__item-total"><span>${this.price} </span> ${this.convert}/день</div>\n                        </div>\n                    </div>\n                `)}convertPriseFromTo(e,t){let o;const n={USD:80,RUB:1,EU:90,FR:100,GR:2};if(n[e]<n[t])o=n[e]/n[t];else{if(!(n[e]>=n[t]))return this.convert="грн",this.price.toFixed(2);o=n[t]/n[e]}return(this.price*o).toFixed(2)}}axios.get("http://localhost:3000/menu").then((t=>{t.data.forEach((({img:t,altimg:o,title:n,descr:r,price:c})=>{new e(".menu__field",t,o,n,r,c).render()}))}))}(),function(t){const n=document.querySelectorAll("form"),r=document.querySelector(".modal");function c(n){const c=document.querySelector(".modal__dialog");c.classList.add("hide"),o(".modal",t);const i=document.createElement("div");i.classList.add("modal__dialog"),i.innerHTML=`\n                <div class="modal__content">\n                    <div data-close="" class="modal__close">×</div>\n                    <div class="modal__title">${n}</div>\n                </div>\n            `,r.append(i),setTimeout((()=>{i.remove(),c.classList.remove("hide"),e(r)}),4e3)}n.forEach((e=>{var t;(t=e).addEventListener("submit",(e=>{e.preventDefault();const o=document.createElement("img");o.src="./img/form/spinner.svg",o.style.cssText="\n                    display: block;\n                    margin: 0 auto;\n                ",t.append(o);const n=new FormData(t);axios.post("http://localhost:3000/requests",Object.fromEntries(n.entries())).then((e=>{console.log(e),c("success"),t.reset(),o.remove()})).catch((()=>{c("failed")})).finally((()=>{t.reset()}))}))}))}(t),function(t,n,r){const c=document.querySelector(t);document.querySelectorAll(n).forEach((e=>{e.addEventListener("click",(()=>{o(t,r)}))})),e(c),window.addEventListener("scroll",(function e(){window.pageYOffset+document.documentElement.clientHeight>=document.documentElement.scrollHeight&&(o(t,r),window.removeEventListener("scroll",e))}))}(".modal","[data-modal]",t),function({sliderContainerSelector:e,prevSelector:t,nextSelector:o,currentSelector:n,totalSelector:r,slideSelector:c,slidesWrapperSelector:i,slidesInnerSelector:l}){const a=document.querySelector(t),s=document.querySelector(e),d=document.querySelector(o),u=document.querySelector(n),m=(document.querySelector(r),document.querySelectorAll(c)),g=document.querySelector(i),h=document.querySelector(l),f=window.getComputedStyle(m[0]).width,v=a.querySelector("img"),S=d.querySelector("img");function y(e){e.style.opacity=.5}function p(e){e.style.opacity=1}function _(e){+e.textContent<10&&(e.textContent=`0${e.textContent}`)}!function(e,t){e.style.overflow="hidden",t.style.width=100*m.length+"%",t.style.display="flex",t.style.transition=".5s all"}(g,h),function(e,t,o,n){o.style.transform=`translateX(-${n*(+t.textContent-1)}px)`,document.querySelector(".offer__slider-counter").addEventListener("click",(r=>{if(r.target.contains(d)||r.target.contains(S)||r.target.contains(a)||r.target.contains(v)){let c=+t.textContent;(r.target.contains(d)||r.target.contains(S))&&c++,(r.target.contains(a)||r.target.contains(v))&&c--,c>e.length&&(c=1),c<1&&(c=e.length),o.style.transform=`translateX(-${n*(c-1)}px)`,t.textContent=c,_(t)}})),t.addEventListener("DOMSubtreeModified",(()=>{let r=+t.textContent;r>e.length&&(r=1),r<1&&(r=e.length),o.style.transform=`translateX(-${n*(r-1)}px)`}))}(m,u,h,f.replace(/\D/g,"")),function(e,t){e.style.position="relative";const o=document.createElement("ol");o.classList.add("carousel-indicators"),o.style.cssText="\n            position: absolute;\n            right: 0;\n            bottom: 0;\n            left: 0;\n            z-index: 15;\n            display: flex;\n            justify-content: center;\n            margin-right: 15%;\n            margin-left: 15%;\n            list-style: none;\n        ",e.append(o);for(let e=0;e<t.length;e++){const t=document.createElement("li");t.setAttribute("data-slide-to",e+1),t.style.cssText="\n                box-sizing: content-box;\n                flex: 0 1 auto;\n                width: 30px;\n                height: 6px;\n                margin-right: 3px;\n                margin-left: 3px;\n                cursor: pointer;\n                background-color: #fff;\n                background-clip: padding-box;\n                border-top: 10px solid transparent;\n                border-bottom: 10px solid transparent;\n                opacity: .5;\n                transition: opacity .6s ease;\n            ",e==+u.textContent-1&&(t.style.opacity=1),o.append(t)}}(s,m),function(e){const t=document.querySelector(".carousel-indicators");t.addEventListener("click",(o=>{for(let e=0;e<m.length;e++)y(t.children[e]);"LI"==o.target.tagName&&(e.textContent=o.target.getAttribute("data-slide-to"),_(e),p(o.target))})),e.addEventListener("DOMSubtreeModified",(()=>{for(let e=0;e<m.length;e++)y(t.children[e]);p(document.querySelector(`[data-slide-to="${+e.textContent}"]`))}))}(u)}({prevSelector:".offer__slider-prev",nextSelector:".offer__slider-next",sliderContainerSelector:".offer__slider",currentSelector:"#current",totalSelector:"#total",slideSelector:".offer__slide",slidesWrapperSelector:".offer__slider-wrapper",slidesInnerSelector:".offer__slider-inner"}),function(e,t,o,n){const r=document.querySelectorAll(e),c=document.querySelectorAll(t),i=document.querySelector(o);function l(){c.forEach((e=>{e.style.display="none"})),r.forEach((e=>{e.classList.remove(n)}))}function a(e){c[e].style.display="block",r[e].classList.add(n)}l(),a(1),i.addEventListener("click",(t=>{const o=t.target;o&&o.classList.contains(e.slice(1))&&r.forEach(((e,t)=>{o==e&&(l(),a(t))}))}))}(".tabheader__item",".tabcontent",".tabheader__items","tabheader__item_active"),function(){function e(e){return e>=0&&e<10?`0${e}`:e}!function(t,o){const n=document.querySelector(".timer"),r=n.querySelector("#days"),c=n.querySelector("#hours"),i=n.querySelector("#minutes"),l=n.querySelector("#seconds"),a=setInterval(s,1e3);function s(){const t=function(e){const t=Date.parse("2021-10-11")-Date.parse(new Date);return{total:t,days:Math.floor(t/864e5),hours:Math.floor(t/36e5%24),minutes:Math.floor(t/6e4%60),seconds:Math.floor(t/1e3%60)}}();r.innerHTML=e(t.days),c.innerHTML=e(t.hours),i.innerHTML=e(t.minutes),l.innerHTML=e(t.seconds),t.total<=0&&clearInterval(a)}s()}()}()}))})();
//# sourceMappingURL=bundle.js.map